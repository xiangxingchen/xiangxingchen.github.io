---
title: 前端静态资源缓存策略(0)
date: 2018-06-14 16:31:56
tags: [前端,缓存]
---

# 效果
对于页面中静态资源（html/js/css/img/webfont），理想中的效果：

- 页面以最快的速度获取到所有必须静态资源，渲染飞快；
- 服务器上静态资源未更新时再次访问不请求服务器；
- 服务器上静态资源更新时请求服务器最新资源，加载又飞快。

总结下来也就是2个指标：

- 静态资源加载速度
- 页面渲染速度

# 性能优化原则及分类
| 优化方向 | 优化手段 |
| - | - |
| 请求数量 | 合并脚本和样式表，CSS Sprites，拆分初始化负载，划分主域 |
| 请求带宽 | 开启GZip，精简JavaScript，移除重复脚本，图像优化 |
| 缓存利用 | 使用CDN，使用外部JavaScript和CSS，添加Expires头，减少DNS查找，配置ETag，使AjaX可缓存 |
| 页面结构 | 将样式表放在顶部，将脚本放在底部，尽早刷新文档的输出 |
| 代码校验 | 避免CSS表达式，避免重定向 |

目前大多数前端团队可以利用 yui compressor 或者 google closure compiler 等压缩工具很容易做到 精简Javascript 这条原则；同样的，也可以使用图片压缩工具对图像进行压缩，实现 图像优化 原则。这两条原则是对单个资源的处理，因此不会引起任何工程方面的问题。很多团队也通过引入代码校验流程来确保实现 避免css表达式 和 避免重定向 原则。目前绝大多数互联网公司也已经开启了服务端的Gzip压缩，并使用CDN实现静态资源的缓存和快速访问；一些技术实力雄厚的前端团队甚至研发出了自动CSS Sprites工具，解决了CSS Sprites在工程维护方面的难题。使用“查找-替换”思路，我们似乎也可以很好的实现 划分主域 原则。

# 静态资源版本更新与缓存



## 参考
1. [Web静态资源缓存及优化](https://zhuanlan.zhihu.com/p/30780216)
2. [前端工程与性能优化](https://github.com/fouber/blog/issues/3)
